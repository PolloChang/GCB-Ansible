- name: Debian Base version
  when: ansible_distribution == "Debian"
  block:
  - name: TWGCB-removed-package
    apt:
      state: removed
      name: "{{ item }}"
    with_items:
      "{{ removed_packages }}"

- name: RedHat Base version
  when: ansible_distribution == "RedHat"
  block:
  - name: TWGCB-removed-package
    yum:
      state: removed
      name: "{{ item }}"
    with_items:
      "{{ removed_packages }}"


# - name: RedHat Base version 6
#   when: ansible_distribution == "RedHat" and ansible_distribution_major_version == "6"
#   block:
#   - name: removed_package
#     yum:
#       state: removed
#       name: "{{ item }}"
#     with_items:
#       "{{ removed_package }}"

# - name: RedHat Base version 7
#   when: ansible_distribution == "RedHat" and ansible_distribution_major_version == "6"
#   block:
#   - name: removed_package
#     yum:
#       state: removed
#       name: "{{ item }}"
#     with_items:
#       "{{ removed_package }}"

- name: RedHat Base version 5 6 7
  when: ansible_distribution == "RedHat" and ansible_distribution_major_version in ["5","6","7"]
  block:
  - name: TWGCB-removed-package-TWGCB-01-003
    yum:
      state: removed
      name: "{{ item }}"
    with_items:
      "{{ removed_packages_TWGCB_01_003 }}"    

- name: RedHat Base version is no less than 8
  when: ansible_distribution == "RedHat" and ansible_distribution_major_version | int >= 8
  block:
  - name: TWGCB-removed-package-TWGCB-01-008
    yum:
      state: removed
      name: "{{ item }}"
    with_items:
      "{{ removed_packages_TWGCB_01_008 }}"

